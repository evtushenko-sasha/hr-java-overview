# GIT

Git - это система контроля версий, которая позволяет прослеживать все изменения(кто, когда и что изменил)

_Версия_ — это состояние файла (или нескольких файлов) в какой-то конкретный момент времени. Например, пустой файл (1), тот же файл с каким-то текстом (2) и этот же файл, в котором была исправлена опечатка (3) — три разные версии одного файла, которые были получены последовательной модификацией (изменением) файла.

_Система управления версиями_ — программа, позволяющая сохранять состояние файлов (те самые версии), возвращаться к ранее сохраненному состоянию, сохранять последовательность изменений внесенных в файлы, отменять или заново применять эти изменения, отслеживать авторство изменений.

_Разделение версий_ — независимые изменения одного файла.
![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/5b9/619/da1/5b9619da1d61d8fd31ecfcf2ba3bee69.png)

Например, у нас есть файл с каким-то текстом (версия этого файла). Файл отправляется на проверку, там обнаруживается и исправляется опечатка (получаем новую версию файла). Независимо от этого в старый (неисправленный) файл дописывается еще что-то (получаем еще одну версию этого файла). Т.е., на данный момент у нас есть два разных файла (две версии одного файла), которые были независимо друг от друга созданы на основе одной общей версии.

_Слияние версий_ — объединение двух и более независимых версий. Для примера выше, слиянием будет объединение двух существующих версий нашего файла в одну — файл, в котором будет и новый текст, и исправленная опечатка.

_История разработки_ — совокупность всех версий файлов, над которыми ведется работа. Историей разработки в данном случае будет список изменений:
* создание файла
* добавление изначального текста
* исправление опечатки
* добавление нового текста
* объединение двух версий файла (при выполнении слияния)

_Нелинейная история_ — история, в которой изменения вносятся не одно за другим последовательно, а может быть внесено несколько независимых изменений на основе одной версии файла (исправление опечатки и добавление нового текста). Т.е. мы создаем две параллельные истории изменений файла.


##### Основные термины по гиту:
* Репозиторий (repository) — совокупность файлов, состояние которых отслеживается, и история их изменений. По факту, репозиторий — это проект, над которым ведется работа, и все изменения в этом проекте. Для отслеживания состояния файла его необходимо добавить в репозиторий.
* Коммит (commit) — сохраненное состояние (версия) файлов репозитория. Содержит сообщение для описания изменений, сприсок изменений, кто изменил и когда.
* Ветка (branch) — последовательность коммитов (история изменения состояния репозитория). Каждый коммит в ветке имеет «родителя» (parent commit) — коммит, на основе которого был получен текущий. В репозитории может быть несколько веток (в случаях, когда к одной версии репозитория применяется несколько независимых изменений).
* HEAD — указатель на текущий коммит (указатель на состояние, в котором репозиторий находится на данный момент).
* Мастер (master, main) — основная ветка репозитория, создается автоматически при создании репозитория.
* Мерж (слияние, merge) — объединение двух или более веток. В процессе мержа изменения с указанной ветки переносятся (копируются) в текущую.
* Мерж конфликт (merge conflict) — ситуация, когда при слиянии веток в один или несколько файлов вносились независимые изменения. В некоторых случаях (например, если изменялись разные, не пересекающиеся части одного файла) git способен самостоятельно решить, как выполнять слияние таких файлов. Если автоматически это сделать не удалось — возникает конфликт.

Возможность вносить изменения в репозиторий нелинейно (независимые изменения в разных ветках) позволяет организовать коллективную работу над проектом. Каждый участник разработки имеет собственную копию репозитория (локальный репозиторий, local repository), в которой может вести работу независимо от остальных. Для синхронизации внесенных изменений используется общая копия репозитория (удаленный репозиторий, remote repository), которая размещается на отдельном сервере (GitHub, GitLab, Bitbucket, собственный сервер и т.д.).

Наличие удаленного репозитория может быть полезным и при одиночной разработке: оно позволяет синхронизировать состояние проекта на разных компьютерах и просто сохранить проект на внешнем сервере.

__Есть два варианта синхронизации изменений:__
* пулл (pull) — слияние состояния удаленного репозитория и локального (обычно — в отдельной ветке). Пулл может выполняться как для одной и той же ветки (с одинаковым именем), так и для разных. Пулл являет собою обычный мерж, но целевая ветка при этом находится не в том же репозитории, в котором выполняется пулл, а в удаленном. Как следствие, при пулле так же создается мерж коммит, пулл можно отменить (заревертить) и в его процессе может возникнуть мерж конфликт.
  ![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/481/6e4/c2c/4816e4c2cc291379aa0fba18497bf71b.png)
* пуш (push) — обратный пуллу процесс. При пуше изменения из локального репозитория переносятся в удаленный. Пуш обновляет состояние текущей ветки в удаленном репозитории и не является мержем (не создает дополнительные коммиты и не может привести к конфликтам). Если в ветке удаленного репозитория присутствуют коммиты, которых нет в локальном репозитории, сигнализируется ошибка о несовпадении истории изменений (non fast-forward merge), пуш выполнить не получится. В таком случае необходимо сначала синхронизировать состояние локального репозитория (получить недостающие коммиты с помощью пулла), и только после этого повторить процесс пуша.
  ![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/e8a/ffe/fc7/e8affefc729a13ebb8073ac61f4e1aa3.png)
  Часто возникает необходимость обновить информацию о состоянии удаленного репозитория (существующих ветках и коммитах в них) без выполнения слияния (пулла). Такой процесс называется фетчем (fetch). Таким образом, пулл является комбинаций фетча и мержа: сперва обновляется информация о состоянии целевой ветки в удаленном репозитории, а затем ее изменения вливаются в текущую ветку в локальном репозитории.

##### Обычно все используют такую модель веток(gitflow):
_Gitflow_ — это лишь методика работы с Git; в ней определяется, какие виды веток необходимы проекту и как выполнять слияние между ними.

![](https://wac-cdn.atlassian.com/dam/jcr:cc0b526e-adb7-4d45-874e-9bcea9898b4a/04%20Hotfix%20branches.svg?cdnVersion=55)

Последовательность действий при работе по модели Gitflow:

1. Из ветки main создается ветка develop.
1. Из ветки develop создается ветка release.
1. Из ветки develop создаются ветки feature(Обычно на одну такую ветку одна сторя или фикс бага).
1. Когда работа над веткой feature завершается, она сливается в ветку develop.
1. Когда работа над веткой release завершается, она сливается с ветками develop и main.
1. Если в ветке main обнаруживается проблема, из main создается ветка hotfix.
1. Когда работа над веткой hotfix завершается, она сливается с ветками develop и main.
